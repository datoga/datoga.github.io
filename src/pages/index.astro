---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection, type CollectionEntry } from "astro:content";

const posts = (await getCollection("blog")).sort(
	(a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
		b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<BaseLayout title="David Torres | Gopher & Backend Developer">
	<main class="max-w-4xl mx-auto px-6 py-20">
		<header class="mb-20 text-center">
			<h1
				class="text-5xl md:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-600 mb-6"
			>
				David Torres
			</h1>
			<p class="text-xl md:text-2xl text-slate-400 max-w-2xl mx-auto">
				Software Engineer focused on Backend, Architecture, and Go.
			</p>
		</header>

		<section>
			<h2
				class="text-3xl font-bold mb-10 text-slate-200 border-b border-slate-800 pb-4"
			>
				Latest Posts
			</h2>
			<div class="grid gap-8">
				{
					posts.map((post) => (
						<article class="group relative bg-slate-800/50 rounded-2xl p-8 hover:bg-slate-800 transition-colors border border-slate-700/50 hover:border-cyan-500/30">
							<div class="flex flex-col md:flex-row md:items-baseline md:justify-between mb-4">
								<h3 class="text-2xl font-bold text-slate-100 group-hover:text-cyan-400 transition-colors">
									<a href={`/blog/${post.slug}/`}>
										<span class="absolute inset-0" />
										{post.data.title}
									</a>
								</h3>
								<time
									datetime={post.data.date.toISOString()}
									class="text-slate-500 font-mono text-sm mt-2 md:mt-0"
								>
									{post.data.date.toLocaleDateString(
										"en-US",
										{
											year: "numeric",
											month: "long",
											day: "numeric",
										},
									)}
								</time>
							</div>
							<p class="text-slate-400 leading-relaxed">
								{post.data.description ||
									"Click to read more..."}
							</p>
						</article>
					))
				}
			</div>
		</section>
	</main>
</BaseLayout>
